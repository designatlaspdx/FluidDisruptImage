(function(b){typeof define=="function"&&define.amd?define(b):b()})(function(){"use strict";const b=`
precision highp float;
uniform vec2 u_resolution;
attribute vec2 a_position;
attribute vec4 a_color;
varying vec4 v_color;
void main() {
    vec2 zeroToOne = a_position / u_resolution;
    vec2 clipSpace = (zeroToOne * 2.0 - 1.0);
    v_color = a_color;
    gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 0.0, 1.0);
    gl_PointSize = 3.5;
}
`,L=`
precision highp float;
varying vec4 v_color;
void main() {
    if (v_color.a < 0.01) discard;
    vec2 coord = gl_PointCoord - vec2(0.5);
    float dist = length(coord);
    float alpha = 1.0 - smoothstep(0.0, 0.5, dist);
    gl_FragColor = vec4(v_color.rgb, v_color.a * alpha);
}
`;console.log("script loaded");const i={logoPath:`${window.FLUID_BASE_URL||"https://fluidimagedisrupt.netlify.app"}/logo2.png`,logoSize:1250,logoColor:"#404040",canvasBg:"#141414",distortionRadius:3e3,forceStrength:.0035,maxDisplacement:100,returnForce:.025};let s,t,h,u=[],g,E,_,Y,F={x:0,y:0},y=0;function x(){s=document.getElementById("canvas");const n=window.devicePixelRatio||1;s.width=window.innerWidth*n,s.height=window.innerHeight*n,s.style.width=window.innerWidth+"px",s.style.height=window.innerHeight+"px"}function P(){t=s.getContext("webgl",{alpha:!0,depth:!1,stencil:!1,antialias:!0,powerPreference:"high-performance",premultipliedAlpha:!1}),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}function z(){const n=X(t.VERTEX_SHADER,b),o=X(t.FRAGMENT_SHADER,L);h=t.createProgram(),t.attachShader(h,n),t.attachShader(h,o),t.linkProgram(h)}function X(n,o){const e=t.createShader(n);return t.shaderSource(e,o),t.compileShader(e),e}function C(){const n=new Image;n.crossOrigin="anonymous",n.onload=function(){const o=document.createElement("canvas"),e=o.getContext("2d");o.width=i.logoSize,o.height=i.logoSize;const c=i.logoSize*.9,f=(i.logoSize-c)/2;e.drawImage(n,f,f,c,c);const a=e.getImageData(0,0,i.logoSize,i.logoSize);I(a.data)},n.src=i.logoPath}function I(n){const o=s.width/2,e=s.height/2,r=[],c=[];function f(l){const d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return d?{r:parseInt(d[1],16)/255,g:parseInt(d[2],16)/255,b:parseInt(d[3],16)/255}:{r:1,g:1,b:1}}const a=f(i.logoColor);for(let l=0;l<i.logoSize;l++)for(let d=0;d<i.logoSize;d++){const p=(l*i.logoSize+d)*4;if(n[p+3]>10){const m=o+(d-i.logoSize/2)*1,R=e+(l-i.logoSize/2)*1;r.push(m,R);const v=n[p]/255,A=n[p+1]/255,S=n[p+2]/255,B=n[p+3]/255;c.push(v*a.r,A*a.g,S*a.b,B),u.push({originalX:m,originalY:R,velocityX:0,velocityY:0})}}g=new Float32Array(r),E=new Float32Array(c),U(),D()}function U(){_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,g,t.DYNAMIC_DRAW),Y=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,Y),t.bufferData(t.ARRAY_BUFFER,E,t.STATIC_DRAW)}function D(){M(),T(),requestAnimationFrame(D)}function M(){if(y<=0)return;y--;const n=i.distortionRadius*i.distortionRadius;for(let o=0;o<u.length;o++){const e=u[o],r=g[o*2],c=g[o*2+1],f=F.x-r,a=F.y-c,l=f*f+a*a;if(l<n&&l>0){const v=-9e6/l,A=Math.atan2(a,f),S=Math.sqrt((r-e.originalX)**2+(c-e.originalY)**2),B=Math.max(.1,1-S/(i.maxDisplacement*2));e.velocityX+=v*Math.cos(A)*i.forceStrength*B,e.velocityY+=v*Math.sin(A)*i.forceStrength*B}e.velocityX*=.82,e.velocityY*=.82;const d=r+e.velocityX+(e.originalX-r)*i.returnForce,p=c+e.velocityY+(e.originalY-c)*i.returnForce,w=d-e.originalX,m=p-e.originalY,R=Math.sqrt(w*w+m*m);if(R>i.maxDisplacement){const v=R-i.maxDisplacement,A=i.maxDisplacement/R,S=A+(1-A)*Math.exp(-v*.02);g[o*2]=e.originalX+w*S,g[o*2+1]=e.originalY+m*S,e.velocityX*=.7,e.velocityY*=.7}else g[o*2]=d,g[o*2+1]=p}t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferSubData(t.ARRAY_BUFFER,0,g)}function T(){function n(f){const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return a?{r:parseInt(a[1],16)/255,g:parseInt(a[2],16)/255,b:parseInt(a[3],16)/255}:{r:0,g:0,b:0}}t.viewport(0,0,s.width,s.height);const o=n(i.canvasBg);if(t.clearColor(o.r,o.g,o.b,1),t.clear(t.COLOR_BUFFER_BIT),u.length===0)return;t.useProgram(h);const e=t.getUniformLocation(h,"u_resolution");t.uniform2f(e,s.width,s.height),t.bindBuffer(t.ARRAY_BUFFER,_);const r=t.getAttribLocation(h,"a_position");t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,Y);const c=t.getAttribLocation(h,"a_color");t.enableVertexAttribArray(c),t.vertexAttribPointer(c,4,t.FLOAT,!1,0,0),t.drawArrays(t.POINTS,0,u.length)}function O(){document.addEventListener("mousemove",n=>{const o=s.getBoundingClientRect(),e=window.devicePixelRatio||1;F.x=(n.clientX-o.left)*e,F.y=(n.clientY-o.top)*e,y=300}),window.addEventListener("resize",()=>{if(x(),u.length>0){const n=s.width/2,o=s.height/2,e=Math.sqrt(u.length);for(let r=0;r<u.length;r++){const c=Math.floor(r/e),f=r%e,a=n+(f-e/2)*1,l=o+(c-e/2)*1;u[r].originalX=a,u[r].originalY=l,g[r*2]=a,g[r*2+1]=l}t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferSubData(t.ARRAY_BUFFER,0,g)}})}function q(){x(),P(),z(),C(),O()}q()});
